<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
const sqlite3 = require('sqlite3').verbose();

// open the database
let db = new sqlite3.Database('DB/main.db', sqlite3.OPEN_READWRITE, (err) => {
  if (err) {
    console.error(err.message);
  }
  console.log('Connected to the chinook database.');
});

function InsertValues() {
var mydata = document.getElementById("CommonName").value;
db.transaction(function (db) {      
  db.executeSql('CREATE TABLE IF NOT EXISTS Sights (CommonName CHAR(17), location CHAR(32), datte CHAR(10), Observations CHAR(90))');
  db.executeSql('INSERT INTO Sights (CommonName,location,datte,Observations) '+
              'VALUES (?, ?, ?, ?)',
              [mydata, 'loobo', 'loobo', 'loobo']);
  msg = '<p>Log message created and row inserted.</p>';
  document.querySelector('#status').innerHTML =  msg;
});
}


// function myfunction2() {
// db.transaction(function (tx) {
//   tx.executeSql('SELECT * FROM Sights', [], function (tx, results) {
//    var len = results.rows.length, i;
//    msg = "<p>Found rows: " + len + "</p>";
//    document.querySelector('#status').innerHTML +=  msg;
//    for (i = 0; i < len; i++){
//      msg = "<p><b>" + results.rows.item(i).CommonName + "</b></p>";
//      document.querySelector('#status').innerHTML +=  msg;
//    }
//  }, null);
// });
// }
</script>

</head>


<body>
<div class="observation">
  <h1></h1>
  <form action="#" method="post">
    <fieldset>
      <label for="name" >Common Name:</label>
      <input type="text" id="CommonName" placeholder=" Bird common Name" />
      <label for="name" >Location:</label>
      <input type="text" id="location" placeholder=" Where you see it" />
      <label for="email">Date</label>
      <input type="date" id="date" placeholder="mm/dd/yyy" /> 
      <label for="message">Observations:</label>
      <textarea id=" Observations" placeholder="What you see"></textarea>    
    <input type="submit" value="Register" onclick="InsertValues();">        
    </fieldset>
  </form>

</div>

 <script type="text/javascript">
            myfunction2();
 </script>
<div id="status" name="status">Status Message</div>

</body>
</html>
